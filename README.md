# Test Repository for Automotive-SDK

[![Build](https://github.com/lorenzopaolo-cocchinone/automotive-sdk/actions/workflows/publish-with-tests.yaml/badge.svg?branch=main)](https://github.com/lorenzopaolo-cocchinone/automotive-sdk/actions/workflows/publish-with-tests.yaml?branch=main)
[![GitHub Packages](https://img.shields.io/badge/Maven-GitHub%20Packages-blueviolet?logo=github)](https://github.com/lorenzopaolo-cocchinone/automotive-sdk/packages)

[![Contributions Welcome](https://img.shields.io/badge/contributions-welcome-brightgreen.svg)](./CONTRIBUTING.md)
[![Code of Conduct](https://img.shields.io/badge/Code%20of%20Conduct-Enabled-blueviolet)](./CODE_OF_CONDUCT.md)
[![Security Policy](https://img.shields.io/badge/security-policy-blue.svg)](./SECURITY.md)

![Platform](https://img.shields.io/badge/platform-android%20automotive-brightgreen)


```
// Code Quality maintened by community
https://detekt.dev/docs/intro

// Annotation Processing
https://github.com/google/ksp

// Room
https://developer.android.com/jetpack/androidx/releases/room

// Mmkv
https://github.com/Tencent/MMKV

// App Startup
https://developer.android.com/topic/libraries/app-startup

// JUnit 4
https://junit.org/junit4/

// Junit 4 Android
https://developer.android.com/training/testing/instrumented-tests/androidx-test-libraries/runner

// Mockito
https://site.mockito.org/

// OkHttp3
https://square.github.io/okhttp/

// JaCoCo
https://www.jacoco.org/jacoco/trunk/doc/index.html

// Robolectric
https://developer.android.com/training/testing/local-tests/robolectric

// Dagger2
https://developer.android.com/training/dependency-injection/dagger-android
```

## Contributing

Please see [CONTRIBUTING.md](./CONTRIBUTING.md) for guidelines on how to contribute.

## Code of Conduct

Please read our [Code of Conduct](./CODE_OF_CONDUCT.md) to help us maintain a welcoming community.

## Security

To report security issues, please check [SECURITY.md](./SECURITY.md).

## Gradle Tasks
```
./gradlew clean
# Deletes the module's build directory, cleaning up all files generated by previous builds.

./gradlew lint
# Runs static code analysis on the Android project to identify potential issues such as style violations, bugs, and best practices.

./gradlew lintFix
# Attempts to automatically fix issues detected by the Android lint analysis.

./gradlew detekt
# Performs static code analysis on Kotlin source code to detect design, style, and quality issues in the main codebase.

./gradlew detektTest
# Performs static analysis on Kotlin code to detect design and quality issues in local JVM test sources.

./gradlew detektAndroidTest
# Performs static analysis on Kotlin code to detect design and quality issues in Android instrumented test sources.

./gradlew jacocoCoverage
# Generates a code coverage report for local JVM tests using JaCoCo.

./gradlew connectedCoreDebugAndroidTest
# Runs Android instrumented tests (androidTest) on a connected device or emulator in debug mode.

./gradlew testCoreDebugUnitTest
# Runs local JVM unit tests in debug mode.

./gradlew createDebugCoverageReport
# Runs Android instrumented tests with code coverage reporting enabled via JaCoCo.
# Note: This does not work on Automotive OS.

./gradlew assembleDebug
# Builds the debug APK or app bundle without running tests, suitable for development and debugging.

./gradlew assembleRelease
# Builds the release APK or app bundle optimized for production, usually signed and ready for distribution.

./gradlew generatePomFileForReleasePublication
# Generates the POM (Project Object Model) file for the release publication, which defines metadata and dependencies for publishing the library to a Maven repository.

./gradlew publishToMavenLocal
# Publishes the library artifact to the local Maven repository (usually located at ~/.m2/repository), allowing it to be used as a dependency in other local projects.
```

## Junit Env Variable
Set the following variable values in local.properties:

| Variable Name        | Description                              | Required           | Default |
|----------------------|------------------------------------------|--------------------|---------|
| RADIOPLAYER_USERNAME | Radioplayer username for Basic Http Auth | Only for Unit Test |         |
| RADIOPLAYER_PASSWORD | Radioplayer password for Basic Http Auth | Only for Unit Test |         |

## Product Flavor(s)
To add new product flavor, under `productFlavors` in build.gradle.kts create a new flavor.
Under `publishing` add a new `singleVariant`. Finally create  under `publications` a new MavenPublication

# Kotlin Annotations for Java Interoperability

This document lists the most useful Kotlin annotations for ensuring smooth interoperability with Java, along with usage examples.

---

## ðŸ§© Annotation Table

| Annotation              | Description / Purpose                                                                          |
|-------------------------|------------------------------------------------------------------------------------------------|
| `@JvmName`              | Changes the name of a method or property in the generated bytecode for Java usage.             |
| `@file:JvmName`         | Changes the name of the generated class for top-level functions in a Kotlin file.              |
| `@JvmOverloads`         | Generates overloads for functions with default parameter values, making them usable from Java. |
| `@JvmStatic`            | Marks a method or property as static when used in an `object` or `companion object`.           |
| `@JvmField`             | Exposes a field directly (without getter/setter), useful for constants or public fields.       |
| `@Throws`               | Declares the exceptions a function might throw, making them visible in Java.                   |
| `@JvmSuppressWildcards` | Suppresses wildcard generation for generic types to improve Java signature clarity.            |
| `@JvmWildcard`          | Forces a wildcard (`?`) to appear in the generic type for Java compatibility.                  |
| `@JvmDefault`           | (Deprecated in favor of JVM 8 default methods) Allows default implementations in interfaces.   |

---

## ðŸ§ª Examples

### `@JvmName`

```kotlin
@JvmName("multiplyInts")
fun multiply(a: Int, b: Int): Int = a * b
```

**In Java:**

```java
int result = MyKt.multiplyInts(2, 3);
```

---

### `@file:JvmName`

```kotlin
// File: utils.kt
@file:JvmName("StringUtils")
fun trimAndLower(input: String): String = input.trim().lowercase()
```

**In Java:**

```java
String result = StringUtils.trimAndLower(" Text ");
```

---

### `@JvmOverloads`

```kotlin
class Greeter {
    @JvmOverloads
    fun greet(name: String = "World", punctuation: String = "!") {
        println("Hello, $name$punctuation")
    }
}
```

**In Java:**

```java
Greeter g = new Greeter();
g.greet();                    // Hello, World!
g.greet("Alice");             // Hello, Alice!
g.greet("Alice", "?");        // Hello, Alice?
```

---

### `@JvmStatic`

```kotlin
class MathUtils {
    companion object {
        @JvmStatic
        fun square(x: Int): Int = x * x
    }
}
```

**In Java:**

```java
int s = MathUtils.square(5);  // Static call
```

---

### `@JvmField`

```kotlin
object Constants {
    @JvmField
    val PI = 3.1415
}
```

**In Java:**

```java
double pi = Constants.PI;
```

---

### `@Throws`

```kotlin
@Throws(IOException::class)
fun readFile(path: String): String {
    // ...
    throw IOException("File not found")
}
```

**In Java:**

```java
try {
    String content = MyKt.readFile("file.txt");
} catch (IOException e) {
    e.printStackTrace();
}
```

---

### `@JvmSuppressWildcards`

```kotlin
fun <T> useList(@JvmSuppressWildcards list: List<T>) {
// Java sees List<T> instead of List<? extends T>
}
```

---

### `@JvmWildcard`

```kotlin
fun getList(): List<@JvmWildcard String> {
    return listOf("A", "B")
}
```

**In Java:**  
Seen as `List<? extends String>`

---

### `@JvmDefault` (deprecated)

```kotlin
interface Logger {
    @JvmDefault
    fun log(message: String) {
        println("LOG: $message")
    }
}
```

> **Note:** Prefer using default interface methods with `-Xjvm-default=all` compiler option instead of this annotation in recent Kotlin versions.

---

## âœ… Notes

- Always test your Kotlin library with Java consumers.
- Keep public APIs simple and Java-friendly.
- Avoid advanced Kotlin-only features (e.g., inline classes, reified types) unless strictly necessary.

